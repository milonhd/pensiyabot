from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from aiogram.utils.keyboard import ReplyKeyboardBuilder
from config import PAYMENT_URL

# –û—Å–Ω–æ–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –≤—ã–±–æ—Ä–æ–º —Ç–∞—Ä–∏—Ñ–æ–≤
main_keyboard = InlineKeyboardMarkup(inline_keyboard=[
    [InlineKeyboardButton(text="–£—Ä–æ–≤–µ–Ω—å –°–ê–ú–û–°–¢–û–Ø–¢–ï–õ–¨–ù–´–ô", callback_data="self")],
    [InlineKeyboardButton(text="–£—Ä–æ–≤–µ–Ω—å –ë–ê–ó–û–í–´–ô", callback_data="basic")],
    [InlineKeyboardButton(text="–£—Ä–æ–≤–µ–Ω—å –ü–†–û", callback_data="pro")],
])

# –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º
materials_keyboard = InlineKeyboardMarkup(inline_keyboard=[
    [InlineKeyboardButton(text="üè∞ –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã", callback_data="get_materials")]
])

def get_main_menu_keyboard(is_admin=False):
    """–û—Å–Ω–æ–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é"""
    kb = ReplyKeyboardBuilder()
    kb.button(text="üìÑ –ü—É–±–ª–∏—á–Ω–∞—è –æ—Ñ–µ—Ä—Ç–∞")
    kb.button(text="üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞")
    
    if is_admin:
        kb.button(text="üì¢ –†–∞—Å—Å—ã–ª–∫–∞")
    
    kb.adjust(2)  # 2 –∫–Ω–æ–ø–∫–∏ –≤ —Ä—è–¥
    return kb.as_markup(resize_keyboard=True, one_time_keyboard=False)

def get_cancel_keyboard():
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–æ–π –æ—Ç–º–µ–Ω—ã"""
    kb = ReplyKeyboardBuilder()
    kb.button(text="‚ùå –û—Ç–º–µ–Ω–∏—Ç—å")
    return kb.as_markup(resize_keyboard=True)

def get_confirm_keyboard():
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è"""
    kb = ReplyKeyboardBuilder()
    kb.button(text="‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É")
    kb.button(text="‚ùå –û—Ç–º–µ–Ω–∏—Ç—å")
    kb.adjust(2)
    return kb.as_markup(resize_keyboard=True)

def get_self_years_keyboard():
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –≥–æ–¥–∞ –≤—ã—Ö–æ–¥–∞ –Ω–∞ –ø–µ–Ω—Å–∏—é"""
    return InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text=f"–ü–µ–Ω—Å–∏—è {year}", callback_data=f"year_{year}")] 
        for year in range(2025, 2032)
    ])

def get_payment_keyboard(year=None, tariff=None):
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ–∫–∞"""
    callback_data = f"send_screenshot_{year}" if year else f"send_screenshot_{tariff}"
    return InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="‚úÖ –û–ø–ª–∞—Ç–∏—Ç—å", url=PAYMENT_URL)],
        [InlineKeyboardButton(text="üìÑ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ–∫", callback_data=callback_data)]
    ])
